# æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡

+++

## ä¸€ã€æ’åº

### 1 å‰ç½®çŸ¥è¯†

#### 1.1 æ’åºç®—æ³•å¤§å…¨

![image-20221003163705650](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003163705650.png)



#### 1.2 æ’åºåŸºæœ¬çŸ¥è¯†

1. ä½•ä¸ºæ’åºï¼Ÿ
   - æ’åºå‰ï¼š3ï¼Œ1ï¼Œ6ï¼Œ9ï¼Œ2ï¼Œ5ï¼Œ8ï¼Œ47
   - å‡åºæ’åºï¼š1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6ï¼Œ7ï¼Œ8ï¼Œ9
   - é™åºæ’åºï¼š9ï¼Œ8ï¼Œ7ï¼Œ6ï¼Œ5ï¼Œ4ï¼Œ3ï¼Œ2ï¼Œ1

2. ä½•ä¸ºç¨³å®šæ€§ï¼Ÿ

   - é™åºå‰ï¼š5ï¼Œ1ï¼Œ3<sub>a</sub>ï¼Œ7ï¼Œ3<sub>b</sub>
   - ç¨³å®šçš„æ’åºï¼š1ï¼Œ3<sub>a</sub>ï¼Œ3<sub>b</sub>ï¼Œ5ï¼Œ7
   - ä¸ç¨³å®šçš„æ’åºï¼š1ï¼Œ3<sub>b</sub>ï¼Œ3<sub>a</sub>ï¼Œ5ï¼Œ7

   å¯¹**è‡ªå®šä¹‰å¯¹è±¡**è¿›è¡Œæ’åºæ—¶ï¼Œç¨³å®šæ€§ä¼šå½±å“æœ€ç»ˆçš„æ’åºæ•ˆæœã€‚

3. ä½•ä¸ºåŸåœ°ç®—æ³•ï¼Ÿ
   - ä¸ä¾èµ–é¢å¤–çš„èµ„æºæˆ–è€…ä¾èµ–å°‘æ•°çš„é¢å¤–èµ„æºï¼Œä»…ä¾é *è¾“å‡º*æ¥è¦†ç›–*è¾“å…¥*ï¼›
   - ç©ºé—´å¤æ‚åº¦ä¸º`O(1)`çš„éƒ½å¯ä»¥è®¤ä¸ºæ˜¯åŸåœ°ç®—æ³•ï¼›
   - éåŸåœ°ç®—æ³•ï¼Œç§°ä¸º Not-in-place æˆ–è€… Out-of-placeã€‚



#### 1.3 å†™æ’åºç®—æ³•å‰çš„å‡†å¤‡

##### 1.3.1 é¡¹ç›®ç»“æ„

åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¤§ä½“ç»“æ„æ˜¯è¿™æ ·çš„ï¼š

![image-20221004124012854](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004124012854.png)

- sortï¼šå„ç§æ’åºç±»
  - cmpï¼šæ¯”è¾ƒç±»æ’åº
  - sort.javaï¼šæ’åºæŠ½è±¡ç±»
- toolsï¼šæ’åºä¸­ç”¨åˆ°çš„å·¥å…·
  - Asserts.javaï¼šå•å…ƒæµ‹è¯•
  - Inegers.javaï¼šç”Ÿæˆæµ‹è¯•æ•°æ®
  - Times.javaï¼šè®¡ç®—æ—¶é—´
- Mainï¼šä¸»å‡½æ•°ï¼Œå†™æ’åºæµ‹è¯•
- Student.javaï¼šåˆ©ç”¨è‡ªå®šä¹‰ç±»æµ‹è¯•ç¨³å®šæ€§(sort.javaä¸­ä½¿ç”¨)



##### 1.3.2 Sort.java

å†™ä¸€ä¸ªæŠ½è±¡ç±» Sort.java

- å®ç°è‡ªå®šä¹‰å¯¹è±¡çš„æ¯”è¾ƒ(cmp)ï¼Œäº¤æ¢(swap)æ–¹æ³•
- åŒæ—¶å¯ä»¥ç”¨æ¥è®¡ç®—æ¯”è¾ƒæ¬¡æ•°(cmpCount)ï¼Œäº¤æ¢æ¬¡æ•°(swapCount)ï¼ŒèŠ±è´¹æ—¶é—´(time)
- æ’åºæ˜¯å¦ç¨³å®š()

```java
package com.xk._02Algorithmic._01sort.sort;

import com.xk._02Algorithmic._01sort.Student;
import java.text.DecimalFormat;

public abstract class Sort<E extends Comparable<E>> implements Comparable<Sort<E>> {
    protected E[] array;
    private int cmpCount;
    private int swapCount;
    private long time;
    private DecimalFormat fmt = new DecimalFormat("#.00");

    public void sort(E[] array) {
        if (array == null || array.length < 2) return;
        this.array = array;
        this.cmpCount = 0;
        this.swapCount = 0;
        long begin = System.currentTimeMillis();
        sort();
        time = System.currentTimeMillis() - begin;
    }

    protected abstract void sort();

    /**
     * æ¯”è¾ƒå¯¹åº”ä¸¤ä¸ªç´¢å¼•å¯¹åº”æ•°æ®çš„å¤§å°
     * @return
     *      è¿”å›å€¼è¿”å›0ï¼Œ array[i1] == array[i2]
     *      è¿”å›å€¼å¤§äº0ï¼Œ array[i1] > array[i2]
     *      è¿”å›å€¼å°äº0ï¼Œ array[i1] < array[i2]
     */
    protected int cmp(int i1, int i2){
        cmpCount++;
        return array[i1].compareTo(array[i2]);
    }
    protected int cmp(E v1, E v2){
        cmpCount++;
        return v1.compareTo(v2);
    }

    protected void swap(int i1, int i2) {
        swapCount++;
        E tmp = array[i1];
        array[i1] = array[i2];
        array[i2] = tmp;
    }

    @Override
    public int compareTo(Sort<E> o) {
        int result = (int) (this.time - o.time);
        if (result == 0) result = this.swapCount - o.swapCount;
        if (result == 0) result = this.cmpCount - o.cmpCount;
        return result;
    }

    @Override
    public String toString() {
        String timeStr = "è€—æ—¶ï¼š" + (time / 1000.0) + "s(" + time + "ms)";
        String compareCountStr = "æ¯”è¾ƒï¼š" + numberString(cmpCount);
        String swapCountStr = "äº¤æ¢ï¼š" + numberString(swapCount);
        String stableStr = "ç¨³å®šæ€§ï¼š" + isStable();
        return "ã€" + getClass().getSimpleName() + "ã€‘\n"
                + stableStr + "\t "
                + timeStr + " \t"
                + compareCountStr + "\t "
                + swapCountStr + "\n"
                + "------------------------------------------------------------------";
    }

    private String numberString(int number) {
        if (number < 10000) return "" + number;
        if (number < 100000000) return fmt.format(number / 10000.0) + "ä¸‡";
        return fmt.format(number / 100000000.0) + "äº¿";
    }

    private boolean isStable(){
        if (this instanceof ShellSort1 || this instanceof ShellSort2) return false;
        Student[] students = new Student[20];
        for (int i = 0; i < students.length; i++) {
            students[i] = new Student(i * 10, 10);
        }

        sort((E[]) students);

        for (int i = 1; i < students.length; i++) {
            if (students[i].score - students[i-1].score != 10) return false;
        }
        return true;
    }
}
```



##### 1.3.3 Asserts.java

```java
public class Asserts {
   public static void test(boolean value) {
      try {
         if (!value) throw new Exception("æµ‹è¯•æœªé€šè¿‡");
      } catch (Exception e) {
         e.printStackTrace();
      }
   }
}
```



##### 1.3.4 Integers.java

```java
package com.xk._02Algorithmic._01sort.tools;

import java.util.Arrays;

public class Integers {
   public static Integer[] random(int count, int min, int max) {
      if (count <= 0 || min > max) return null;
      Integer[] array = new Integer[count];
      int delta = max - min + 1;
      for (int i = 0; i < count; i++) {
         array[i] = min + (int)(Math.random() * delta);
      }
      return array;
   }
   
   public static Integer[] combine(Integer[] array1, Integer[] array2) {
      if (array1 == null || array2 == null) return null;
      Integer[] array = new Integer[array1.length + array2.length];
      for (int i = 0; i < array1.length; i++) {
         array[i] = array1[i];
      }
      for (int i = 0; i < array2.length; i++) {
         array[i + array1.length] = array2[i];
      }
      return array;
      
   }
   
   public static Integer[] same(int count, int unsameCount) {
      if (count <= 0 || unsameCount > count) return null;
      Integer[] array = new Integer[count];
      for (int i = 0; i < unsameCount; i++) {
         array[i] = unsameCount - i;
      }
      for (int i = unsameCount; i < count; i++) {
         array[i] = unsameCount + 1;
      }
      return array;
   }
   
   public static Integer[] headTailAscOrder(int min, int max, int disorderCount) {
      Integer[] array = ascOrder(min, max);
      if (disorderCount > array.length) return array;
      
      int begin = (array.length - disorderCount) >> 1;
      reverse(array, begin, begin + disorderCount);
      return array;
   }
   
   public static Integer[] centerAscOrder(int min, int max, int disorderCount) {
      Integer[] array = ascOrder(min, max);
      if (disorderCount > array.length) return array;
      int left = disorderCount >> 1;
      reverse(array, 0, left);
      
      int right = disorderCount - left;
      reverse(array, array.length - right, array.length);
      return array;
   }
   
   public static Integer[] headAscOrder(int min, int max, int disorderCount) {
      Integer[] array = ascOrder(min, max);
      if (disorderCount > array.length) return array;
      reverse(array, array.length - disorderCount, array.length);
      return array;
   }
   
   public static Integer[] tailAscOrder(int min, int max, int disorderCount) {
      Integer[] array = ascOrder(min, max);
      if (disorderCount > array.length) return array;
      reverse(array, 0, disorderCount);
      return array;
   }
   
   public static Integer[] ascOrder(int min, int max) {
      if (min > max) return null;
      Integer[] array = new Integer[max - min + 1];
      for (int i = 0; i < array.length; i++) {
         array[i] = min++;
      }
      return array;
   }
   
   public static Integer[] descOrder(int min, int max) {
      if (min > max) return null;
      Integer[] array = new Integer[max - min + 1];
      for (int i = 0; i < array.length; i++) {
         array[i] = max--;
      }
      return array;
   }
   
   /**
    * åè½¬ä¸€ä¸ªæ•°ç»„ï¼Œç´¢å¼•èŒƒå›´æ˜¯[begin, end)
    */
   private static void reverse(Integer[] array, int begin, int end) {
      int count = (end - begin) >> 1;
      int sum = begin + end - 1;
      for (int i = begin; i < begin + count; i++) {
         int j = sum - i;
         int tmp = array[i];
         array[i] = array[j];
         array[j] = tmp;
      }
   }
   
   public static Integer[] copy(Integer[] array) {
      return Arrays.copyOf(array, array.length);
   }
   
   public static boolean isAscOrder(Integer[] array) {
      if (array == null || array.length == 0) return false;
      for (int i = 1; i < array.length; i++) {
         if (array[i - 1] > array[i]) return false;
      }
      return true;
   }
   
   public static void println(Integer[] array) {
      if (array == null) return;
      StringBuilder string = new StringBuilder();
      for (int i = 0; i < array.length; i++) {
         if (i != 0) string.append("_");
         string.append(array[i]);
      }
      System.out.println(string);
   }
}
```



##### 1.3.5 Times.java

```java
package com.xk._02Algorithmic._01sort.tools;

import java.text.SimpleDateFormat;
import java.util.Date;

public class Times {
   private static final SimpleDateFormat fmt = new SimpleDateFormat("HH:mm:ss.SSS");
   
   public interface Task {
      void execute();
   }
   
   public static void test(String title, Task task) {
      if (task == null) return;
      title = (title == null) ? "" : ("ã€" + title + "ã€‘");
      System.out.println(title);
      System.out.println("å¼€å§‹ï¼š" + fmt.format(new Date()));
      long begin = System.currentTimeMillis();
      task.execute();
      long end = System.currentTimeMillis();
      System.out.println("ç»“æŸï¼š" + fmt.format(new Date()));
      double delta = (end - begin) / 1000.0;
      System.out.println("è€—æ—¶ï¼š" + delta + "ç§’");
      System.out.print("-------------------------------------");
      System.out.println("-------------------------------------");
   }
}
```



##### 1.3.6 Student.java

```java
package com.xk._02Algorithmic._01sort;

public class Student implements Comparable<Student> {
   public int score;
   public int age;
   
   public Student(int score, int age) {
      this.score = score;
      this.age = age;
   }
   
   @Override
   public int compareTo(Student o) {
      return age - o.age;
   }
}
```



### 2 åå¤§æ’åºç®—æ³•

#### 2.1 å†’æ³¡æ’åº

**å†’æ³¡æ’åº**ä¹Ÿå«åš**èµ·æ³¡æ’åº**ã€‚

**æ‰§è¡Œæµç¨‹**ï¼š

1. ä»å¤´å¼€å§‹æ¯”è¾ƒæ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ï¼Œå¦‚æœç¬¬1ä¸ªæ¯”ç¬¬2ä¸ªå¤§ï¼Œå°±äº¤æ¢å®ƒä»¬çš„ä½ç½®ï¼›

   æ‰§è¡Œå®Œä¸€è½®åï¼Œæœ€æœªå°¾é‚£ä¸ªå…ƒç´ å°±æ˜¯æœ€å¤§çš„å…ƒç´ ã€‚

2. å¿½ç•¥**1**ä¸­æ›¾ç»æ‰¾åˆ°çš„æœ€å¤§å…ƒç´ ï¼Œé‡å¤æ‰§è¡Œæ­¥éª¤**1**ï¼Œç›´åˆ°å…¨éƒ¨å…ƒç´ æœ‰åºã€‚

è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„å†’æ³¡æ’åºã€‚

```java
package com.xk._02Algorithmic._01sort.sort;

/**
 * @description: å†’æ³¡æ’åº
 * @author: xu
 * @date: 2022/10/1 2:14
 */
public class BubbleSort1<E extends Comparable<E>> extends Sort<E> {
    /**
     * å†’æ³¡æ’åº
     */
    private void bubbleSort1(){
        for (int end = array.length - 1; end > 0; end--) {
            for (int begin = 1; begin <= end; begin++) {
                if (cmp(begin-1, begin) > 0){
                    swap(begin, begin-1);
                }
            }
        }
    }

    @Override
    protected void sort() {
        bubbleSort1();
    }
}
```



##### 2.1.1 å†’æ³¡æ’åº--ä¼˜åŒ–1

è¿™ä¸ªä¼˜åŒ–å¹¶ä¸ä¼šæé«˜å†’æ³¡æ’åºçš„å¹³å‡æ€§èƒ½ï¼Œåªæ˜¯**é’ˆå¯¹æç«¯æ¡ä»¶è¿›è¡Œå¤„ç†**ã€‚

å¦‚æœ**åºåˆ—å·²ç»å®Œå…¨æœ‰åº**ï¼Œå¯ä»¥æå‰ç»ˆæ­¢å†’æ³¡æ’åºã€‚

```java
package com.xk._02Algorithmic._01sort.sort;

/**
 * @description: å†’æ³¡æ’åº ä¼˜åŒ–1 -- å¦‚æœåºåˆ—å·²ç»å®Œå…¨æœ‰åºï¼Œå¯ä»¥æå‰ç»ˆæ­¢å†’æ³¡æ’åº
 * @author: xu
 * @date: 2022/10/1 2:14
 */
public class BubbleSort2<E extends Comparable<E>> extends Sort<E> {
    /**
     * å†’æ³¡æ’åº ä¼˜åŒ–1 -- å¦‚æœåºåˆ—å·²ç»å®Œå…¨æœ‰åºï¼Œå¯ä»¥æå‰ç»ˆæ­¢å†’æ³¡æ’åº
     */
    private void bubbleSort2(){
        for (int end = array.length - 1; end > 0; end--) {
            boolean swap = true;
            for (int begin = 1; begin <= end; begin++) {
                if (cmp(begin, begin-1) < 0){
                    swap(begin, begin-1);
                    swap = false;
                }
            }
            if (swap) break;
        }
    }

    @Override
    protected void sort() {
        bubbleSort2();
    }
}
```



##### 2.1.2 å†’æ³¡æ’åº--ä¼˜åŒ–2

è¿™ä¸ªä¼˜åŒ–æ˜¯åœ¨ä¼˜åŒ–1çš„åŸºç¡€ä¸Šï¼Œå¢å¤§æç«¯æ¡ä»¶çš„èŒƒå›´ï¼Œä»**å®Œå…¨æœ‰åº**å˜ä¸º**å°¾éƒ¨å±€éƒ¨æœ‰åº**ã€‚

å¦‚æœ**åºåˆ—å°¾éƒ¨å·²ç»å±€éƒ¨æœ‰åº**ï¼Œå¯ä»¥**è®°å½•æœ€å1æ¬¡äº¤æ¢çš„ä½ç½®**ï¼Œå‡å°‘æ¯”è¾ƒæ¬¡æ•°ã€‚

```java
package com.xk._02Algorithmic._01sort.sort;

/**
 * @description: å†’æ³¡æ’åº ä¼˜åŒ–2 -- å¦‚æœåºåˆ—å°¾éƒ¨å·²ç»å±€éƒ¨æœ‰åºï¼Œå¯ä»¥è®°å½•æœ€å1æ¬¡äº¤æ¢çš„ä½ç½®ï¼Œå‡å°‘æ¯”è¾ƒæ¬¡æ•°
 * @author: xu
 * @date: 2022/10/1 2:14
 */
public class BubbleSort3<E extends Comparable<E>> extends Sort<E> {
    /**
     * å†’æ³¡æ’åº ä¼˜åŒ–2 -- å¦‚æœåºåˆ—å°¾éƒ¨å·²ç»å±€éƒ¨æœ‰åºï¼Œå¯ä»¥è®°å½•æœ€å1æ¬¡äº¤æ¢çš„ä½ç½®ï¼Œå‡å°‘æ¯”è¾ƒæ¬¡æ•°
     */
    private void bubbleSort3(){
        for (int end = array.length - 1; end > 0; end--) {
            // sortedIndex çš„åˆå§‹å€¼åœ¨æ•°ç»„å®Œå…¨æœ‰åºçš„æ—¶å€™æœ‰ç”¨
            int sortedIndex = 1;
            for (int begin = 1; begin <= end; begin++) {
                if (cmp(begin, begin-1) < 0){
                    swap(begin, begin-1);
                    sortedIndex = begin;
                }
            }
            end = sortedIndex;
        }
    }

    @Override
    protected void sort() {
        bubbleSort3();
    }
}
```



##### 2.1.3 å¤æ‚åº¦ä¸ç¨³å®šæ€§

æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n<sup>2</sup>)

æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼šO(n)

ç©ºé—´å¤æ‚åº¦ï¼šO(1)

**å†’æ³¡æ’åºå±äº In-place**ï¼›

å†’æ³¡æ’åºå±äº**ç¨³å®šçš„æ’åºç®—æ³•**ã€‚

ç¨æœ‰ä¸æ…ï¼Œç¨³å®šçš„æ’åºç®—æ³•ä¹Ÿèƒ½è¢«å†™æˆä¸ç¨³å®šçš„æ’åºç®—æ³•ï¼Œæ¯”å¦‚ä¸‹é¢çš„å†’æ³¡æ’åºä»£ç æ˜¯ä¸ç¨³å®šçš„ã€‚

![image-20221003171905603](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003171905603.png)



#### 2.2 é€‰æ‹©æ’åº

##### 2.2.1 ä»£ç å®ç°

æ‰§è¡Œæµç¨‹ï¼š

1. ä»åºåˆ—ä¸­æ‰¾å‡ºæœ€å¤§çš„é‚£ä¸ªå…ƒç´ ï¼Œç„¶åä¸æœ€æœ«å°¾çš„å…ƒç´ äº¤æ¢ä½ç½®

   æ‰§è¡Œå®Œä¸€è½®åï¼Œæœ€æœ«å°¾çš„é‚£ä¸ªå…ƒç´ å°±æ˜¯æœ€å¤§çš„å…ƒç´ 

2. å¿½ç•¥**1**ä¸­æ›¾ç»æ‰¾åˆ°çš„æœ€å¤§å…ƒç´ ï¼Œé‡å¤æ‰§è¡Œæ­¥éª¤**1**ã€‚

```java
package com.xk._02Algorithmic._01sort.sort;

/**
 * @description: é€‰æ‹©æ’åºï¼šæœ€å¤§çš„å…ƒç´ æ”¾åœ¨æœ€å³è¾¹
 * @author: xu
 * @date: 2022/10/1 4:34
 */
public class SelectionSort1<E extends Comparable<E>> extends Sort<E> {
    /**
     * é€‰æ‹©æ’åºï¼šæœ€å¤§çš„å…ƒç´ æ”¾åœ¨æœ€å³è¾¹
     */
    private void selectionSort1() {
        for (int end = array.length - 1; end > 0; end--) {
            int maxIndex = 0;
            for (int begin = 1; begin <= end; begin++) {
                if (cmp(maxIndex, begin) <= 0) {
                    // <= : ä¸ºäº†ç®—æ³•çš„ç¨³å®šæ€§
                    // ä»å‰å¾€åéå†ï¼Œå°†ç›¸ç­‰æ•°å€¼çš„æœ€åä¸€ä¸ªæ”¾åˆ°æ•°ç»„çš„æœ€åé¢å»
                    maxIndex = begin;
                }
            }
            swap(maxIndex, end);
        }
    }

    @Override
    protected void sort() {
        selectionSort1();
    }
}
```

é€‰æ‹©æ’åºçš„äº¤æ¢æ¬¡æ•°è¦è¿œè¿œå°‘äºå†’æ³¡æ’åºï¼Œå¹³å‡æ€§èƒ½ä¼˜äºå†’æ³¡æ’åº



##### 2.2.2 å¤æ‚åº¦ä¸ç¨³å®šæ€§

- æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n<sup>2</sup>)
- ç©ºé—´å¤æ‚åº¦ï¼šO(1)
- é€‰æ‹©æ’åºå±äº**ä¸ç¨³å®šæ’åº**

é€‰æ‹©æ’åºæ˜¯å¦è¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼Ÿ

- **ä½¿ç”¨å †æ¥é€‰æ‹©æœ€å¤§å€¼ï¼Œå¯ä»¥å¤§å¤§æé«˜é€‰æ‹©é€Ÿåº¦**ã€‚



#### 2.3 å †æ’åº

##### 2.3.1 ä»£ç å®ç°

æ‰§è¡Œæµç¨‹ï¼š

1. å¯¹åºåˆ—è¿›è¡ŒåŸåœ°å»ºå †ï¼ˆheapifyï¼‰
2. é‡å¤æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼Œç›´åˆ°å †çš„å…ƒç´ æ•°é‡ä¸º1
   - äº¤æ¢å †é¡¶å…ƒç´ ä¸å°¾å…ƒç´ 
   - å †çš„å…ƒç´ æ•°é‡å‡ 1
   - å¯¹ 0 ä½ç½®è¿›è¡Œ 1 æ¬¡ siftDown æ“ä½œ

![image-20221003173557802](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003173557802.png)



```java
package com.xk._02Algorithmic._01sort.sort;

/**
 * @description: å †æ’åº
 * @author: xu
 * @date: 2022/10/1 4:57
 */
public class HeapSort<E extends Comparable<E>> extends Sort<E> {
    /**
     * å †æ’åºï¼šåŸåœ°å»ºå †
     */
    private void heapSort() {
        int heapSize = array.length;
        // åŸåœ°å»ºå † è‡ªä¸‹è€Œä¸Šçš„ä¸‹æ»¤
        for (int i = (heapSize >> 1) - 1; i >= 0; i--) {
            siftDown(i, heapSize);
        }
        while (heapSize > 1) {
            // äº¤æ¢å †é¡¶å…ƒç´ å’Œå°¾éƒ¨å…ƒç´ 
            swap(0, --heapSize);
            // å¯¹0ä½ç½®è¿›è¡Œsiftdownï¼ˆæ¢å¤å †çš„æ€§è´¨ï¼‰
            siftDown(0, heapSize);
        }
    }

    /**
     * ä¸‹æ»¤
     * @param index
     */
    private void siftDown(int index, int heapSize) {
        E element = array[index];
        // å¿…é¡»ä¿è¯indexä½ç½®æ˜¯éå¶å­èŠ‚ç‚¹
        int half = heapSize >> 1;
        while (index < half) {
            // é»˜è®¤ä¸ºå·¦å­èŠ‚ç‚¹è·Ÿå®ƒè¿›è¡Œæ¯”è¾ƒ
            int childIndex = (index << 1) + 1;
            E child = array[childIndex];

            // å³å­èŠ‚ç‚¹
            int rightIndex = childIndex + 1;
            // é€‰å‡ºå·¦å³å­èŠ‚ç‚¹æœ€å¤§çš„é‚£ä¸ª
            if (rightIndex < heapSize && cmp(child, array[rightIndex]) < 0){
                child = array[childIndex = rightIndex];
            }
            if (cmp(element, child) >= 0) break;

            // å°†å­èŠ‚ç‚¹å­˜æ”¾åˆ°indexä½ç½®
            array[index] = child;
            // é‡æ–°è®¾ç½® index
            index = childIndex;
        }
        array[index] = element;
    }

    @Override
    protected void sort() {
        heapSort();
    }
}
```



##### 2.3.2 å¤æ‚åº¦ä¸ç¨³å®šæ€§

- æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)
- ç©ºé—´å¤æ‚åº¦ï¼šO(1)
- å †æ’åºå±äº**ä¸ç¨³å®šæ’åº**



#### 2.4 æ’å…¥æ’åº

##### 2.4.1 ä»£ç å®ç°

æ’å…¥æ’åºéå¸¸ç±»ä¼¼äºæ‰‘å…‹ç‰Œçš„æ’åºï¼Œå°†åé¢çš„ç‰Œä¸€å¼ å¼ æ’å…¥åˆ°å‰é¢ï¼Œä½¿å¾—å‰é¢æœ‰åºçš„ç‰Œé€æ¸å˜å¤šï¼Œç›´åˆ°å®Œå…¨æœ‰åºã€‚

![image-20221003174609730](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003174609730.png)

![image-20221003174613119](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003174613119.png)

æ‰§è¡Œæµç¨‹ï¼š

1. åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ’å…¥æ’åºä¼šå°†åºåˆ—åˆ†ä¸º2éƒ¨åˆ†ï¼šå¤´éƒ¨æ˜¯å·²ç»æ’å¥½åºçš„ï¼Œå°¾éƒ¨æ˜¯å¾…æ’åºçš„
2. ä»å¤´å¼€å§‹æ‰«ææ¯ä¸€ä¸ªå…ƒç´ ï¼šæ¯å½“æ‰«æåˆ°ä¸€ä¸ªå…ƒç´ ï¼Œå°±å°†å®ƒæ’å…¥åˆ°å¤´éƒ¨åˆé€‚çš„ä½ç½®ï¼Œä½¿å¾—å¤´éƒ¨æ•°æ®ä¾ç„¶ä¿æŒæœ‰åº

```java
package com.xk._02Algorithmic._01sort.sort;

/**
 * @description: æ’å…¥æ’åº
 * @author: xu
 * @date: 2022/10/1 23:08
 */
public class InsertionSort1<E extends Comparable<E>> extends Sort<E> {
    /**
     * æ’å…¥æ’åº
     */
    private void insertionSort1(){
        for (int begin = 1; begin < array.length; begin++) {
            int curIndex = begin;
            while (curIndex > 0 && cmp(curIndex-1, curIndex) > 0) {
                swap(curIndex, curIndex-1);
                curIndex--;
            }
        }
    }

    @Override
    protected void sort() {
        insertionSort1();
    }
}
```



##### 2.4.2 æ’å…¥æ’åº--é€†åºå¯¹

ä»€ä¹ˆæ˜¯é€†åºå¯¹ï¼Ÿ

- æ•°ç»„ <2, 3, 8, 6, 1> çš„é€†åºå¯¹ä¸ºï¼š

  <2, 1> <3, 1> <8, 1> <8, 6> <6, 1>ï¼Œå…±5ä¸ªé€†åºå¯¹

æ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸é€†åºå¯¹çš„æ•°é‡æˆæ­£æ¯”å…³ç³»

- é€†åºå¯¹çš„æ•°é‡è¶Šå¤šï¼Œæ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦è¶Šé«˜



å¾ˆæ˜æ˜¾ï¼Œä¸‹å›¾ä»ä¸Šè‡³ä¸‹ï¼Œ**æ’å…¥æ’åºçš„æ•ˆç‡æ˜¯é€æ¸æé«˜çš„**ã€‚

![image-20221003175325855](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003175325855.png)



##### 2.4.3 æ’å…¥æ’åº--ä¼˜åŒ–1

æ€è·¯æ˜¯å°†ã€äº¤æ¢ã€‘è½¬ä¸ºã€æŒªåŠ¨ã€‘

æ‰§è¡Œæµç¨‹ï¼š

1. å…ˆå°†å¾…æ’å…¥çš„å…ƒç´ å¤‡ä»½
2. å¤´éƒ¨æœ‰åºæ•°æ®ä¸­æ¯”å¾…æ’å…¥å…ƒç´ å¤§çš„ï¼Œéƒ½æœå°¾éƒ¨æ–¹å‘æŒªåŠ¨1ä¸ªä½ç½®
3. å°†å¾…æ’å…¥å…ƒç´ æ”¾åˆ°æœ€ç»ˆçš„åˆé€‚ä½ç½®

![image-20221003180016132](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003180016132.png)

```java
package com.xk._02Algorithmic._01sort.sort;

/**
 * @description: æ’å…¥æ’åºä¼˜åŒ– æ€è·¯ï¼šå°†ã€äº¤æ¢ã€‘è½¬ä¸ºã€æŒªåŠ¨ã€‘
 * @author: xu
 * @date: 2022/10/1 23:08
 */
public class InsertionSort2<E extends Comparable<E>> extends Sort<E> {
    /**
     * æ’å…¥æ’åºä¼˜åŒ– æ€è·¯ï¼šå°†ã€äº¤æ¢ã€‘è½¬ä¸ºã€æŒªåŠ¨ã€‘
     */
    private void insertionSort2(){
        for (int begin = 1; begin < array.length; begin++) {
            int curIndex = begin;
            E cur = array[curIndex];
            while (curIndex > 0 && cmp(array[curIndex - 1], cur) > 0) {
                array[curIndex] = array[curIndex - 1];
                curIndex--;
            }
            array[curIndex] = cur;
        }
    }

    @Override
    protected void sort() {
        insertionSort2();
    }
}
```



##### 2.4.4 å¤æ‚åº¦ä¸ç¨³å®šæ€§

- æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n<sup>2</sup>)

- æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼šO(n)

- ç©ºé—´å¤æ‚åº¦ï¼šO(1)

- å±äºç¨³å®šæ’åº

- å½“é€†åºå¯¹çš„æ•°é‡æå°‘æ—¶ï¼Œæ’å…¥æ’åºçš„æ•ˆç‡ç‰¹åˆ«é«˜

  ç”šè‡³é€Ÿåº¦æ¯” O(nlogn) çº§åˆ«çš„å¿«é€Ÿæ’åºè¿˜è¦å¿«

æ•°æ®é‡ä¸æ˜¯ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œæ’å…¥æ’åºçš„æ•ˆç‡ä¹Ÿæ˜¯éå¸¸å¥½çš„ã€‚



##### 2.4.5 äºŒåˆ†æœç´¢ç®—æ³•

å¦‚ä½•ç¡®å®šä¸€ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Ÿï¼ˆå‡è®¾æ•°ç»„é‡Œé¢å…¨éƒ½æ˜¯æ•´æ•°ï¼‰

- å¦‚æœæ˜¯æ— åºæ•°ç»„ï¼Œä»ç¬¬ 0 ä¸ªä½ç½®å¼€å§‹éå†æœç´¢ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n)

  ![image-20221003180309795](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003180309795.png)

-  å¦‚æœæ˜¯æœ‰åºæ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨äºŒåˆ†æœç´¢ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ï¼šO(logn)

  ![image-20221003180318001](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003180318001.png)

æ€è·¯ï¼š

- å‡è®¾åœ¨*[begin, end)*èŒƒå›´å†…æœç´¢æŸä¸ªå…ƒç´ *v*ï¼Œ*mid == (begin + end) / 2*ï¼›
- å¦‚æœ*v < m*ï¼Œå»*[begin, mid)*èŒƒå›´å†…äºŒåˆ†æœç´¢ï¼›
- å¦‚æœ*v > m*ï¼Œå»*[mid + 1, end)*èŒƒå›´å†…äºŒåˆ†æœç´¢ï¼›
- å¦‚æœ*v == m*ï¼Œç›´æ¥è¿”å›*mid*ã€‚

![image-20221003180635573](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003180635573.png)

![image-20221003180638089](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003180638089.png)

å®ç°ï¼š

```java
package com.xk._02Algorithmic._01sort;

import com.xk._02Algorithmic._01sort.tools.Asserts;

/**
 * @description:
 * @author: xu
 * @date: 2022/10/2 0:09
 */
public class BinarySearch {
    public static int indexOf(Integer[] array, int v) {
        if (array == null || array.length == 0) return -1;
        int begin = 0;
        int end = array.length;
        while (begin < end) {
            int mid = (begin + end) >> 1;
            if (v > array[mid]) {
                begin = mid + 1;
            } else if (v < array[mid]) {
                end = mid;
            } else {
                return mid;
            }
        }
        return -1;
    }

    public static void main(String[] args) {
        Integer[] array = { 2, 4, 6, 7, 11, 15, 22, 26 };
        Asserts.test(search(array, 5) == 2);
        Asserts.test(search(array, 1) == 0);
        Asserts.test(search(array, 15) == 6);
        Asserts.test(search(array, 33) == 8);
    }
}
```



##### 2.4.6 æ’å…¥æ’åº--äºŒåˆ†æœç´¢ä¼˜åŒ–

åœ¨å…ƒç´  v çš„æ’å…¥è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å…ˆ**äºŒåˆ†æœç´¢å‡ºåˆé€‚çš„æ’å…¥ä½ç½®**ï¼Œ**å†å°†å…ƒç´  v æ’å…¥**ã€‚

å‡è®¾æœ‰å¦‚ä¸‹åºåˆ—ï¼š

![image-20221003181121063](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003181121063.png)

è¦æ±‚äºŒåˆ†æœç´¢è¿”å›çš„æ’å…¥ä½ç½®ï¼š**ç¬¬1ä¸ªå¤§äº v çš„å…ƒç´ ä½ç½®**ï¼›

- å¦‚æœ v æ˜¯ 5ï¼Œè¿”å› 2
- å¦‚æœ v æ˜¯ 1ï¼Œè¿”å› 0
- å¦‚æœ v æ˜¯ 15ï¼Œè¿”å› 7
- å¦‚æœ v æ˜¯ 8ï¼Œè¿”å› 5



æ€è·¯ï¼š

- å‡è®¾åœ¨*[begin, end)*èŒƒå›´å†…æœç´¢æŸä¸ªå…ƒç´ *v*ï¼Œ*mid == (begin + end) / 2*ï¼›
- å¦‚æœ*v < m*ï¼Œå»*[begin, mid)*èŒƒå›´å†…äºŒåˆ†æœç´¢
- å¦‚æœ*v â‰¥ m*ï¼Œå»*[mid + 1, end)*èŒƒå›´å†…äºŒåˆ†æœç´¢

![image-20221003181545673](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003181545673.png)



å®ä¾‹ï¼š

![image-20221003181548828](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003181548828.png)

![image-20221003181552202](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003181552202.png)

![image-20221003181554918](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003181554918.png)



ä»£ç å®ç°ï¼š

```java
package com.xk._02Algorithmic._01sort.sort;

import com.xk._02Algorithmic._01sort.tools.Integers;

/**
 * @description: æ’å…¥æ’åºä¼˜åŒ– æ€è·¯ï¼šäºŒåˆ†æœç´¢æ³•
 * @author: xu
 * @date: 2022/10/1 23:08
 */
public class InsertionSort3<E extends Comparable<E>> extends Sort<E> {
    /**
     * æ’å…¥æ’åºä¼˜åŒ– æ€è·¯ï¼šäºŒåˆ†æœç´¢æ³•
     */
    private void insertionSort3(){
        for (int begin = 1; begin < array.length; begin++) {
            insert(begin, search(begin));
        }
    }

    /**
     * å°†sourceä½ç½®çš„å…ƒç´ æ’å…¥åˆ°destä½ç½®
     * @param source
     * @param dest
     */
    private void insert(int source, int dest){
        E v = array[source];
        for (int i = source; i > dest; i--){
            array[i] = array[i-1];
        }
        array[dest] = v;
    }

    /**
     * åˆ©ç”¨äºŒåˆ†æœç´¢æ³•æ‰¾åˆ° index ä½ç½®å…ƒç´ çš„å¾…æ’å…¥ä½ç½®
     * å·²ç»æ’å¥½åºçš„åŒºé—´èŒƒå›´[0, index)
     * @param index
     * @return
     */
    private int search(int index) {
        int begin = 0;
        int end = index;
        while (begin < end) {
            int mid = (begin + end) >> 1;
            if (cmp(index, mid) >= 0) {
                begin = mid + 1;
            } else {
                end = mid;
            }
        }
        return begin;
    }

    @Override
    protected void sort() {
        insertionSort3();
    }
}
```



##### 2.4.7 å¤æ‚åº¦ä¸ç¨³å®šæ€§

ä½¿ç”¨äº†äºŒåˆ†æœç´¢åï¼Œåªæ˜¯å‡å°‘äº†æ¯”è¾ƒæ¬¡æ•°ï¼Œä½†æ’å…¥æ’åºçš„**å¹³å‡æ—¶é—´å¤æ‚åº¦**ä¾ç„¶æ˜¯O(n<sup>2</sup>)

- æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(n<sup>2</sup>)
- æœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼šO(n)
- ç©ºé—´å¤æ‚åº¦ï¼šO(1)
- å±äºç¨³å®šæ’åº



#### 2.5 å½’å¹¶æ’åº

1945å¹´ç”±çº¦ç¿°Â·**å†¯Â·è¯ºä¼Šæ›¼**ï¼ˆJohn von Neumannï¼‰é¦–æ¬¡æå‡ºã€‚

æ‰§è¡Œæµç¨‹ï¼š

1. ä¸æ–­åœ°å°†å½“å‰åºåˆ—å¹³å‡åˆ†å‰²æˆ2ä¸ªå­åºåˆ—

   ç›´åˆ°ä¸èƒ½å†åˆ†å‰²ï¼ˆåºåˆ—ä¸­åªå‰©1ä¸ªå…ƒç´ ï¼‰

2. ä¸æ–­åœ°å°†2ä¸ªå­åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—

   ç›´åˆ°æœ€ç»ˆåªå‰©ä¸‹1ä¸ªæœ‰åºåºåˆ—

![image-20221003193800030](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003193800030.png)

##### 2.5.1 åºåˆ—åˆ†å‰²--divide

```java
sort(0, array.length);
-----------------------------------------------------
/**
 * å¯¹ [begin, end) èŒƒå›´çš„æ•°æ®è¿›è¡Œå½’å¹¶æ’åº
 */	
private void sort(int begin, int end){
	if(end - begin < 2) return; // è‡³å°‘è¦2ä¸ªå…ƒç´ 
	
	int mid = (begin + end) >> 1;
	sort(begin, mid); // å½’å¹¶æ’åºå·¦åŠå­åºåˆ—
	sort(mid, end);	// å½’å¹¶æ’åºå³åŠå­åºåˆ—
	merge(begin, mid, end); // åˆå¹¶æ•´ä¸ªåºåˆ—
}
```



##### 2.5.2 åºåˆ—åˆå¹¶--merge

1. åˆå¹¶åˆ°æ–°åºåˆ—

å°†ä¸¤ä¸ªåºåˆ—åˆå¹¶çš„æ€è·¯ä¸ºï¼šå·¦åºåˆ—å’Œå³åºåˆ—ä¸­çš„å…ƒç´ æŒ¨ä¸ªæ¯”è¾ƒï¼Œ**å°†è¾ƒå°çš„æ”¾å…¥æ–°åºåˆ—ä¸­**ï¼Œæœ€åæ–°åºåˆ—ä¸­çš„å…ƒç´ å¿…ç„¶å‡åºã€‚

ä¸‹å›¾ä¸­ liï¼Œri åˆ†åˆ«ä»£è¡¨æŒ‡å‘å·¦ã€å³åºåˆ—çš„å…ƒç´ **ç´¢å¼•**ï¼Œai ä¸ºæ–°åºåˆ—ï¼ˆåˆå¹¶åçš„åºåˆ—ï¼‰çš„å…ƒç´ **ç´¢å¼•**ï¼›

ã€liã€‘ä»£è¡¨å·¦åºåˆ— li ä½ç½®çš„**å…ƒç´ **ï¼Œã€riã€‘ä»£è¡¨å³åºåˆ— ri ä½ç½®çš„**å…ƒç´ **ï¼Œã€aiã€‘ä¸ºæ–°åºåˆ— ai ä½ç½®çš„**å…ƒç´ **ï¼›

- ç¬¬ä¸€è½®ï¼šã€liã€‘ < ã€riã€‘ï¼Œã€liã€‘æ”¾å…¥æ–°æ•°ç»„ï¼Œã€aiã€‘=ã€liã€‘ï¼Œli++; ai++;
- ç¬¬äºŒè½®ï¼šã€liã€‘ > ã€riã€‘ï¼Œã€riã€‘æ”¾å…¥æ–°æ•°ç»„ï¼Œã€aiã€‘=ã€riã€‘ï¼Œri++; ai++;
- ç¬¬ä¸‰è½®ï¼šã€liã€‘ < ã€riã€‘ï¼Œã€liã€‘æ”¾å…¥æ–°æ•°ç»„ï¼Œã€aiã€‘=ã€liã€‘ï¼Œli++; ai++ï¼›
- ç¬¬å››è½®ï¼š**å·¦åºåˆ—å·²ç»éå†å®Œæ¯•**ï¼Œç›´æ¥å°†å³åºåˆ—å‰©ä½™å…ƒç´ æ”¾å…¥æ–°åºåˆ—ï¼Œå¾—åˆ°æ–°åºåˆ—ï¼ˆå‡åºï¼‰ã€‚

![image-20221003194655961](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003194655961.png)



2. åŸåœ°åˆå¹¶--merge

å°†ä¸¤ä¸ªåºåˆ—åˆå¹¶æ—¶ï¼Œä¸ä¸€å®šè¦åˆå¹¶åˆ°æ–°ç©ºé—´ï¼Œå¯ä»¥åˆç†çš„åˆ©ç”¨åŸç©ºé—´å®ç°**åŸåœ°åˆå¹¶**ã€‚

ä¾‹å¦‚ï¼š

- å°†**arrayçš„å·¦åŠéƒ¨åˆ†[begin, mid)**ï¼Œå¤‡ä»½åˆ° leftArray ä¸­ï¼›
- ç„¶åå°† **leftArray** è§†ä¸ºå·¦å­åºåˆ—ï¼Œ**arraryçš„å³åŠéƒ¨åˆ†[mid, end)**è§†ä¸ºå³å­åºåˆ—ï¼›
- å°†å·¦å­åºåˆ—å’Œå³å­åºåˆ—åˆå¹¶åˆ° array ä¸­ã€‚

![image-20221003195047280](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003195047280.png)

merge è¿‡ç¨‹ï¼š

- ã€liã€‘ <= ã€riã€‘

  array[ai] = leftArray[li]ï¼›

  li++ï¼Œai++;

- ã€liã€‘ > ã€riã€‘

  array[ai] = array[ri];

  ri++ï¼Œai++;



å¯¹åºåˆ— { 3, 8, 6, 10 } è¿›è¡Œå½’å¹¶æ’åºï¼š

![image-20221003195409467](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003195409467.png)

å¯¹åºåˆ— { 3, 6, 8, 10 } è¿›è¡Œå½’å¹¶æ’åºï¼š**å·¦å­åºåˆ—å…ˆéå†ç»“æŸ**ï¼Œé‚£å°±å½’å¹¶ç»“æŸã€‚

![image-20221003195522294](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003195522294.png)

å¯¹åºåˆ— { 8, 10, 3, 6 } è¿›è¡Œå½’å¹¶æ’åºï¼š**å³å­åºåˆ—å…ˆç»“æŸ**ï¼Œåˆ™å°†å·¦è¾¹å‰©ä½™å…¨éƒ¨æ”¾å…¥ã€‚

![image-20221003195602427](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003195602427.png)



3. åŸåœ°åˆå¹¶-merge-å®ç°

```java
/**
 * å°† [begin, mid) å’Œ [mid, end) èŒƒå›´çš„åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—
 */
private void merge(int begin, int mid, int end){
	int li = 0, le = mid - begin; // å·¦è¾¹æ•°ç»„(åŸºäºleftArray)
	int ri = mid, re = end;	// å³è¾¹æ•°ç»„(array)
	int ai = begin; // arrayçš„ç´¢å¼•
	
	// å¤‡ä»½å·¦è¾¹æ•°ç»„åˆ°leftArray
	for(int i = li; i < le; i++){
		leftArray[i] = array[begin + i];
	}
	
	// å¦‚æœå·¦è¾¹è¿˜æ²¡æœ‰ç»“æŸ	
	while(li < le){ // li == le å·¦è¾¹ç»“æŸ, åˆ™ç›´æ¥ç»“æŸå½’å¹¶
		if(ri < re && cmp(array[ri], leftArray[li]) < 0){ // cmpæ”¹ä¸º<=0ä¼šå¤±å»ç¨³å®šæ€§
			array[ai++] = array[ri++]; // å³è¾¹<å·¦è¾¹, æ‹·è´å³è¾¹æ•°ç»„åˆ°array
		}else{
			array[ai++] = leftArray[li++]; // å·¦è¾¹<=å³è¾¹, æ‹·è´å·¦è¾¹æ•°ç»„åˆ°array
		}
	}
}

```



##### 2.5.3 å½’å¹¶æ’åºå®Œæ•´ä»£ç 

```java
package com.xk._02Algorithmic._01sort.sort;

import com.xk._02Algorithmic._01sort.tools.Integers;

/**
 * @description: å½’å¹¶æ’åº
 * @author: xu
 * @date: 2022/10/2 10:43
 */
public class MergeSort<E extends Comparable<E>> extends Sort<E> {
    private E[] leftArray;

    /**
     * å½’å¹¶æ’åº
     */
    private void mergeSort(){
        this.leftArray = (E[]) new Comparable[array.length >> 1];
        sort(0, array.length);
    }

    /**
     * å¯¹ [begin, end) èŒƒå›´çš„æ•°æ®è¿›è¡Œå½’å¹¶æ’åº
     * T(n) = T(n/2) + T(n/2) + O(n)
     * T(n) = 2 * T(n/2) + O(n)
     * @param begin
     * @param end
     */
    private void sort(int begin, int end) {
        // å…ƒç´ æ•°é‡å°äº2 è¿”å›
        if (end - begin < 2) return;
        int mid = (begin + end) >> 1;
        sort(begin, mid);
        sort(mid, end);
        merge(begin, mid, end);
    }

    /**
     * å°† [begin, mid) å’Œ [mid, end) èŒƒå›´çš„åºåˆ—åˆå¹¶æˆæœ‰åºåºåˆ—
     * @param begin
     * @param mid
     * @param end
     */
    private void merge(int begin, int mid, int end) {
        int li = 0, le = mid - begin;
        int ri = mid, re = end;
        int ai = begin;

        // å¤‡ä»½å·¦è¾¹æ•°ç»„
        for (int i = li; i < le; i++) {
            leftArray[i] = array[begin + i];
        }

        while (li < le) { // å¦‚æœå·¦è¾¹è¿˜æ²¡æœ‰ç»“æŸ
            if (ri < re && cmp(leftArray[li], array[ri]) > 0){
                array[ai++] = array[ri++];
            } else {
                array[ai++] = leftArray[li++];
            }
        }
    }

    @Override
    protected void sort() {
        mergeSort();
    }
}
```



##### 2.5.4 å¤æ‚åº¦ä¸ç¨³å®šæ€§

**å½’å¹¶æ’åºèŠ±è´¹çš„æ—¶é—´é€’æ¨å¼**ï¼š

- T(n) = 2âˆ—T(n/2) + O(n)
- T(1) = O(1)
- T(n)/n = T(n/2)/(n/2) + O(1)

**æ ¹æ®é€’æ¨å¼è®¡ç®—å¤æ‚åº¦**ï¼š

ä»¤Sn = T(n)/n

- S(1) = O(1)
- Sn = S(n/2)+O(1) = S(n/4)+O(2) = S(n/8)+O(3) = S(n/2<sup>k</sup>)+O(k) = S(1)+O(logn) = O(logn)
- Tn = nâˆ—Sn = O(nlogn)

ç”±äºå½’å¹¶æ’åºæ€»æ˜¯**å¹³å‡åˆ†å‰²å­åˆ—**ï¼Œæ‰€ä»¥

- **æœ€å¥½ã€æœ€åæ—¶é—´å¤æ‚åº¦**éƒ½æ˜¯ O(nlogn)

- å½’å¹¶æ’åºå±äº**ç¨³å®šæ’åº**

- å½’å¹¶æ’åºçš„**ç©ºé—´å¤æ‚åº¦**æ˜¯ O(n/2 + logn) = O(n)

  n/2 ç”¨äºä¸´æ—¶å­˜æ”¾å·¦ä¾§æ•°ç»„ï¼Œlogn æ˜¯å› ä¸ºé€’å½’è°ƒç”¨



##### 2.5.5 å¸¸è§çš„é€’æ¨å¼ä¸å¤æ‚åº¦

ä»¥åé‡åˆ°å¤æ‚çš„æ—¶é—´å¤æ‚åº¦è®¡ç®—ï¼Œå†™å‡ºé€’å½’å¼ç›´æ¥çœ‹è¿™å¼ è¡¨å³å¯ã€‚

![image-20221003201024133](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221003201024133.png)



##### 2.5.6 LeetCodeçœŸé¢˜

###### åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„

é¢˜ç›®åœ°å€ï¼š[88. åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„](https://leetcode-cn.com/problems/merge-sorted-array/submissions/)

é¢˜ç›®ï¼š

- ç»™ä½ ä¸¤ä¸ªæœ‰åºæ•´æ•°æ•°ç»„ nums1 å’Œ nums2ï¼Œè¯·ä½ å°† nums2 åˆå¹¶åˆ° nums1 ä¸­ï¼Œä½¿ num1 æˆä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„ã€‚

è¯´æ˜:

- åˆå§‹åŒ– nums1 å’Œ nums2 çš„å…ƒç´ æ•°é‡åˆ†åˆ«ä¸º m å’Œ n ã€‚
- ä½ å¯ä»¥å‡è®¾ nums1 æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼ˆç©ºé—´å¤§å°å¤§äºæˆ–ç­‰äºm + nï¼‰æ¥ä¿å­˜ nums2 ä¸­çš„å…ƒç´ ã€‚

ç¤ºä¾‹ï¼š

```java
è¾“å…¥:
nums1 = [1,2,3,0,0,0], m = 3
nums2 = [2,5,6],       n = 3

è¾“å‡º: [1,2,2,3,5,6]
```





#### 2.6 å¿«é€Ÿæ’åº

æ‰§è¡Œæµç¨‹ï¼š

1. ä»åºåˆ—ä¸­é€‰æ‹©ä¸€ä¸ª**è½´ç‚¹å…ƒç´ **ï¼ˆpivotï¼‰ï¼šå‡è®¾æ¯æ¬¡é€‰æ‹©`0`ä½ç½®çš„å…ƒç´ ä¸ºè½´ç‚¹å…ƒç´ 
2. åˆ©ç”¨ pivot å°†åºåˆ—åˆ†å‰²æˆ 2 ä¸ªå­åºåˆ—
   - å°†å°äº pivot çš„å…ƒç´ æ”¾åœ¨pivotå‰é¢ï¼ˆå·¦ä¾§ï¼‰
   - å°†å¤§äº pivot çš„å…ƒç´ æ”¾åœ¨pivotåé¢ï¼ˆå³ä¾§ï¼‰
   - ç­‰äºpivotçš„å…ƒç´ æ”¾å“ªè¾¹éƒ½å¯ä»¥
3. å¯¹å­åºåˆ—è¿›è¡Œ*1*ã€*2*æ“ä½œï¼šç›´åˆ°ä¸èƒ½å†åˆ†å‰²ï¼ˆå­åºåˆ—ä¸­åªå‰©ä¸‹1ä¸ªå…ƒç´ ï¼‰

![image-20221004125914298](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004125914298.png)

> å¿«é€Ÿæ’åºçš„æœ¬è´¨å°±æ˜¯ï¼š
>
> - é€æ¸å°†æ¯ä¸€ä¸ªå…ƒç´ éƒ½è½¬æ¢æˆè½´ç‚¹å…ƒç´ 



##### 2.6.1 è½´ç‚¹æ„é€ 

å¯¹äºåºåˆ— { 6<sub>a</sub>, 8<sub>a</sub>, 8<sub>b</sub>, 2, 6<sub>b</sub>, 4, 9, 5, 7 } **æ„é€ è½´ç‚¹**ï¼š

- é¦–å…ˆå°† `0` ä½ç½®çš„å…ƒç´ å¤‡ä»½ï¼Œä½œä¸º**è½´ç‚¹å…ƒç´ **ï¼›

  ![image-20221004130142427](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004130142427.png)

- æœ€ç»ˆç›®æ ‡æ˜¯æ„é€ å‡º**ä»¥è½´ç‚¹å…ƒç´ ä¸ºä¸­å¿ƒçš„åºåˆ—**ï¼š

  å·¦åŠè¾¹æ˜¯**å°äºè½´ç‚¹å…ƒç´ **çš„**åºåˆ—**ï¼›

  å³åŠè¾¹æ˜¯**å¤§äºè½´ç‚¹å…ƒç´ **çš„**åºåˆ—**ï¼›å¦‚ä¸‹å›¾ï¼š

  ![image-20221004130408002](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004130408002.png)

é‚£ä¹ˆå¦‚ä½•æ„é€ å‘¢ï¼Ÿ

begin ä¸ºåºåˆ—é¦–ä½ç½®ï¼Œ

- ä»å³å¾€å·¦æ‰«æï¼Œå¯»æ‰¾æ¯”è½´ç‚¹å…ƒç´ å°çš„å…ƒç´ ï¼›**æ‰¾åˆ°ä»¥å**ï¼Œæ”¾åˆ° begin ä½ç½®ï¼Œbegin++ï¼Œç„¶å**åå‘å¯»æ‰¾**ï¼›
- ä»å·¦å¾€å³æ‰«æï¼Œå¯»æ‰¾æ¯”è½´ç‚¹å…ƒç´ å¤§çš„å…ƒç´ ï¼›**æ‰¾åˆ°ä»¥å**ï¼Œæ”¾åˆ° end ä½ç½®ï¼Œend--ï¼Œç„¶å**åå‘å¯»æ‰¾**ï¼›
- å½“ begin == endï¼Œè¯´æ˜å·¦å³éƒ½æ‰«æå®Œäº†ï¼Œæ­¤æ—¶**å°†ä¸€å¼€å§‹å¤‡ä»½çš„è½´ç‚¹å…ƒç´ æ”¾åˆ°ä¸­é—´**ã€‚

è¿™ä¸ªè¿‡ç¨‹æœ‰ç‚¹è¿·æƒ‘æ€§ï¼Œéœ€è¦å…ˆä»å³å¾€å·¦æ‰¾ï¼Œæ‰¾åˆ°ä»¥åå†ä»å·¦å¾€å³ï¼Œä¸æ–­å¾ªç¯è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°**æŠŠæ‰€æœ‰æ¯”è½´ç‚¹å…ƒç´ å°çš„å…ƒç´ æ”¾åˆ°å·¦åŠéƒ¨åˆ†**ï¼Œ**æŠŠæ‰€æœ‰æ¯”è½´ç‚¹å…ƒç´ å¤§çš„å…ƒç´ æ”¾åˆ°å³åŠéƒ¨åˆ†**ï¼Œæ‰ç®—å®Œæˆè¿™ä¸ªè½´ç‚¹çš„æ„é€ ã€‚

![image-20221004130832461](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004130832461.png)



##### 2.6.2 æ„é€ è½´ç‚¹--ä»£ç å®ç°

ä»£ç ä¸­å¦‚ä½•å®ç°**ä»å·¦å¾€å³æ‰«æ**å’Œ**ä»å³å¾€å·¦æ‰«æ**çš„äº¤æ›¿å‘¢ï¼Ÿçœ‹ä¸€çœ¼ä»£ç å°±ä¼šæç„¶å¤§æ‚Ÿã€‚ã€‚ã€‚

```java
/**
 * æ„é€ å‡º [begin, end) èŒƒå›´çš„è½´ç‚¹å…ƒç´ 
 * @param begin
 * @param end
 * @return è½´ç‚¹å…ƒç´ çš„æœ€ç»ˆä½ç½®
 */
private int pivotIndex (int begin, int end) {
    // å¤‡ä»½beginä½ç½®çš„å…ƒç´ 
    E pivot = array[begin];
    // endæŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ 
    end--;
    while (begin < end) {
        while (begin < end) {
            if (cmp(pivot, array[end]) < 0) { // å³è¾¹å…ƒç´  > è½´ç‚¹å…ƒç´ 
                end--;
            } else { // å³è¾¹å…ƒç´  <= è½´ç‚¹å…ƒç´ 
                array[begin++] = array[end];
                break;
            }
        }
        while (begin < end) {
            if (cmp(pivot, array[begin]) > 0) {// å·¦è¾¹å…ƒç´  < è½´ç‚¹å…ƒç´ 
                begin++;
            } else { // å·¦è¾¹å…ƒç´  >= è½´ç‚¹å…ƒç´ 
                array[end--] = array[begin];
                break;
            }
        }
    }
    //å°†è½´ç‚¹å…ƒç´ æ”¾å…¥æœ€ç»ˆçš„ä½ç½®
    array[begin] = pivot;
    // è¿”å›è½´ç‚¹å…ƒç´ çš„ä½ç½®
    return begin;
}
```



##### 2.6.3 æ„é€ è½´ç‚¹--ä¼˜åŒ–

åœ¨è½´ç‚¹å·¦å³å…ƒç´ æ•°é‡æ¯”è¾ƒå‡åŒ€çš„æƒ…å†µä¸‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯**æœ€å¥½æƒ…å†µ**ï¼š

- T(n) = 2 âˆ— T(n/2) + O(n) = O(nlogn)

å¦‚æœè½´ç‚¹å·¦å³å…ƒç´ æ•°é‡æåº¦ä¸å‡åŒ€ï¼Œ**æœ€åæƒ…å†µ**ï¼š

- T(n) = T(n âˆ’ 1) + O(n) = O(n<sup>2</sup>)

ä¸ºäº†é™ä½æœ€åæƒ…å†µçš„å‡ºç°æ¦‚ç‡ï¼Œä¸€èˆ¬é‡‡å–çš„åšæ³•æ˜¯ï¼š

- **éšæœºé€‰æ‹©è½´ç‚¹å…ƒç´ **ï¼šå¯ä»¥åœ¨å¤‡ä»½è½´ç‚¹å…ƒç´ å‰ï¼Œå°† begin ä½ç½®çš„å…ƒç´ ä¸åºåˆ—ä¸­çš„éšæœºå…ƒç´ äº¤æ¢ä¸€ä¸‹ã€‚

```java
// éšæœºé€‰æ‹©è½´ç‚¹å…ƒç´ , å°† begin ä½ç½®çš„å…ƒç´ ä¸åºåˆ—ä¸­çš„éšæœºå…ƒç´ äº¤æ¢ä¸€ä¸‹
swap(begin, begin + (int)Math.random()*(end - begin));

// å¤‡ä»½beginä½ç½®çš„å…ƒç´ 
T pivot = array[begin];
.....
```



##### 2.6.4 æ€è€ƒï¼šä¸è½´ç‚¹ç›¸ç­‰çš„å…ƒç´ 

å¦‚æœåºåˆ—ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸è½´ç‚¹å…ƒç´ ç›¸ç­‰ï¼Œ**åˆ©ç”¨ä¸Šé¢çš„ç®—æ³•å®ç°**ï¼Œè½´ç‚¹å…ƒç´ å¯ä»¥å°†åºåˆ—åˆ†å‰²æˆ 2 ä¸ªå‡åŒ€çš„å­åºåˆ—

![image-20221004133556562](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004133556562.png)

**æ€è€ƒï¼šæŠŠä¸Šé¢çš„ä»£ç ä¸­ï¼Œcmp ä½ç½®çš„åˆ¤æ–­åˆ†åˆ«æ”¹ä¸º â‰¤ã€â‰¥ ä¼šèµ·åˆ°ä»€ä¹ˆæ•ˆæœ**?

![image-20221004133646582](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004133646582.png)

åæœï¼š

- è½´ç‚¹å…ƒç´ åˆ†å‰²å‡ºæ¥çš„å­åºåˆ—æåº¦ä¸å‡åŒ€
- å¯¼è‡´å‡ºç°æœ€åæ—¶é—´å¤æ‚åº¦ O(n<sup>2</sup>)



##### 2.6.5 å¿«é€Ÿæ’åºå®Œæ•´ä»£ç 

```java
package com.xk._02Algorithmic._01sort.sort.cmp;

import com.xk._02Algorithmic._01sort.sort.Sort;

/**
 * @description: å¿«é€Ÿæ’åº
 * @author: xu
 * @date: 2022/10/2 10:43
 */
public class QuickSort<E extends Comparable<E>> extends Sort<E> {
    /**
     * å¿«é€Ÿæ’åº
     */
    private void quickSort(){
        quickSort(0, array.length);
    }

    /**
     * å¯¹ [begin, end) èŒƒå›´çš„å…ƒç´ è¿›è¡Œå¿«é€Ÿæ’åº
     * æœ€å¥½çš„æƒ…å†µï¼šå·¦å³å‡åŒ€
     *      T(n) = T(n/2) + T(n/2) + O(n)
     *      T(n) = 2 * T(n/2) + O(n) = O(nlogn)
     * æœ€åçš„æƒ…å†µï¼šè½´ç‚¹ä¸€ç›´åœ¨æœ€å³è¾¹æˆ–è€…æœ€æœ€å·¦è¾¹
     *      T(n) = T(n-1) + O(n) = O(n^2)
     * @param begin
     * @param end
     */
    private void quickSort(int begin, int end){
        if (end - begin < 2) return;
        // ç¡®å®šè½´ç‚¹ä½ç½® O(n)
        int mid = pivotIndex(begin, end); // O(n)
        // å¯¹å­åºåˆ—è¿›è¡Œå¿«é€Ÿæ’åº
        quickSort(begin, mid);
        quickSort(mid+1, end);
    }

    /**
     * æ„é€ å‡º [begin, end) èŒƒå›´çš„è½´ç‚¹å…ƒç´ 
     * @param begin
     * @param end
     * @return è½´ç‚¹å…ƒç´ çš„æœ€ç»ˆä½ç½®
     */
    private int pivotIndex (int begin, int end) {
        // éšæœºé€‰æ‹©ä¸€ä¸ªå…ƒç´ è·Ÿ begin ä½ç½®è¿›è¡Œäº¤æ¢
        swap(begin, begin + (int) (Math.random() * (end - begin)));
    
        // å¤‡ä»½beginä½ç½®çš„å…ƒç´ 
        E pivot = array[begin];
        // endæŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ 
        end--;
        while (begin < end) {
            while (begin < end) {
                if (cmp(pivot, array[end]) < 0) { // å³è¾¹å…ƒç´  > è½´ç‚¹å…ƒç´ 
                    end--;
                } else { // å³è¾¹å…ƒç´  <= è½´ç‚¹å…ƒç´ 
                    array[begin++] = array[end];
                    break;
                }
            }
            while (begin < end) {
                if (cmp(pivot, array[begin]) > 0) {// å·¦è¾¹å…ƒç´  < è½´ç‚¹å…ƒç´ 
                    begin++;
                } else { // å·¦è¾¹å…ƒç´  >= è½´ç‚¹å…ƒç´ 
                    array[end--] = array[begin];
                    break;
                }
            }
        }
        //å°†è½´ç‚¹å…ƒç´ æ”¾å…¥æœ€ç»ˆçš„ä½ç½®
        array[begin] = pivot;
        // è¿”å›è½´ç‚¹å…ƒç´ çš„ä½ç½®
        return begin;
    }

    @Override
    protected void sort() {
        quickSort();
    }
}
```



##### 2.6.6 å¤æ‚åº¦ä¸ç¨³å®šæ€§

**å¿«é€Ÿæ’åºçš„å¤æ‚åº¦ä¸ç¨³å®šæ€§**ï¼š

- æœ€å¥½ã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)
- æœ€åæ—¶é—´å¤æ‚åº¦ï¼šO(n<sup>2</sup>)
- ç”±äº**é€’å½’**è°ƒç”¨çš„ç¼˜æ•…ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(logn)
- å±äº**ä¸ç¨³å®šæ’åº**



#### 2.7 å¸Œå°”æ’åº

å¸Œå°”æ’åºæŠŠåºåˆ—çœ‹ä½œæ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œåˆ†æˆ ğ‘š åˆ—ï¼Œé€åˆ—è¿›è¡Œæ’åº

- ğ‘š ä»æŸä¸ªæ•´æ•°é€æ¸å‡ä¸º1
- å½“ ğ‘š ä¸º1æ—¶ï¼Œæ•´ä¸ªåºåˆ—å°†å®Œå…¨æœ‰åº

å› æ­¤ï¼Œå¸Œå°”æ’åºä¹Ÿè¢«ç§°ä¸º**é€’å‡å¢é‡æ’åº**ï¼ˆDiminishing Increment Sortï¼‰

çŸ©é˜µçš„åˆ—æ•°å–å†³äº**æ­¥é•¿åºåˆ—**ï¼ˆstep sequenceï¼‰ï¼š

- æ¯”å¦‚ï¼Œå¦‚æœæ­¥é•¿åºåˆ—ä¸º{ 1, 5, 19, 41, 109 }ï¼Œå°±ä»£è¡¨ä¾æ¬¡åˆ†æˆ109åˆ—ã€41åˆ—ã€19åˆ—ã€5åˆ—ã€1åˆ—è¿›è¡Œæ’åº
- ä¸åŒçš„æ­¥é•¿åºåˆ—ï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿä¸åŒ



##### 2.7.1 å®ä¾‹å›¾è§£

å¸Œå°”æœ¬äººç»™å‡ºçš„æ­¥é•¿åºåˆ—æ˜¯ ğ‘›/2<sup>k</sup>(k>=1)ï¼Œæ¯”å¦‚ ğ‘› ä¸º16æ—¶ï¼Œ**æ­¥é•¿åºåˆ—**æ˜¯ { 1, 2, 4, 8 }

å‡è®¾æœ‰å¦‚ä¸‹åºåˆ—ï¼š{ 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1 }

![img](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/20200328121444368.png)

æŒ‰ç…§æ­¥é•¿åºåˆ—ï¼Œé¦–å…ˆ**åˆ†ä¸º8åˆ—ï¼Œå¯¹æ¯ä¸€åˆ—è¿›è¡Œæ’åº**ï¼š

![image-20221004135100351](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004135100351.png)

ç„¶å**åˆ†ä¸º4åˆ—ï¼Œå¯¹æ¯ä¸€åˆ—è¿›è¡Œæ’åº**ï¼š

![image-20221004135135807](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004135135807.png)

ç„¶å**åˆ†ä¸º2åˆ—ï¼Œå¯¹æ¯ä¸€åˆ—è¿›è¡Œæ’åº**ï¼š

![image-20221004135224388](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004135224388.png)

æœ€å**åˆ†ä¸º1åˆ—è¿›è¡Œæ’åº**ï¼Œå˜æˆå‡åºåºåˆ—ã€‚

![image-20221004135320282](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004135320282.png)

ä¸éš¾çœ‹å‡ºæ¥ï¼Œä»8åˆ—å˜ä¸º1åˆ—çš„è¿‡ç¨‹ä¸­ï¼Œ**é€†åºå¯¹çš„æ•°é‡åœ¨é€æ¸å‡å°‘**

è¿˜è®°å¾—`æ’å…¥æ’åº`çš„è¿™ä¸ªæ€§è´¨å—ï¼š

- æ’å…¥æ’åºçš„**æ—¶é—´å¤æ‚åº¦ä¸é€†åºå¯¹çš„æ•°é‡æˆæ­£æ¯”**å…³ç³»
- é€†åºå¯¹çš„æ•°é‡è¶Šå¤šï¼Œæ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦è¶Šé«˜ã€‚

å› æ­¤å¸Œå°”æ’åºåº•å±‚ä¸€èˆ¬ä½¿ç”¨`æ’å…¥æ’åº`å¯¹æ¯ä¸€åˆ—è¿›è¡Œæ’åºï¼Œå¯ä»¥è®¤ä¸ºå¸Œå°”æ’åºæ˜¯`æ’å…¥æ’åº`çš„æ”¹è¿›ç‰ˆã€‚



##### 2.7.2 åˆ—çš„åˆ’åˆ†æ€è·¯

å‡è®¾æœ‰11ä¸ªå…ƒç´ ï¼Œ**æ­¥é•¿åºåˆ—æ˜¯ {1, 2, 5}**ï¼š

![image-20221004135728798](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004135728798.png)

å‡è®¾å…ƒç´ åœ¨ç¬¬ col åˆ—ã€ç¬¬ row è¡Œï¼Œæ­¥é•¿ï¼ˆæ€»åˆ—æ•°ï¼‰æ˜¯ step

- é‚£ä¹ˆè¿™ä¸ªå…ƒç´ **åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•**æ˜¯ row * step + col
- æ¯”å¦‚ 9 åœ¨æ’åºå‰æ˜¯ç¬¬ 0 è¡Œã€ç¬¬ 2 åˆ—ï¼Œé‚£ä¹ˆå®ƒæ’åºå‰çš„ç´¢å¼•æ˜¯ 0 * 5 + 2 = 2
- æ¯”å¦‚ 4 åœ¨æ’åºå‰æ˜¯ç¬¬ 1 è¡Œã€ç¬¬ 2 åˆ—ï¼Œé‚£ä¹ˆå®ƒæ’åºå‰çš„ç´¢å¼•æ˜¯ 1 * 5 + 2 = 7



##### 2.7.3 æ­¥é•¿åºåˆ—è®¡ç®—ä»£ç 

å¸Œå°”æœ¬äººç»™å‡ºçš„æ­¥é•¿åºåˆ—æ˜¯ ğ‘›/2<sup>k</sup>(k>=1)ï¼Œæ¯”å¦‚ ğ‘› ä¸º16æ—¶ï¼Œ**æ­¥é•¿åºåˆ—**æ˜¯ { 1, 2, 4, 8 }

```java
/**
 * å¸Œå°”æœ¬äººæå‡ºçš„æ­¥é•¿åºåˆ—
 */
private List<Integer> shellStepSequence() {
    List<Integer> stepSequence = new ArrayList<>();
    int step = array.length;
    while ((step >>= 1) > 0) {
        stepSequence.add(step);
    }
    return stepSequence;
}
```



##### 2.7.4 å¸Œå°”æ’åºå®Œæ•´å®ç°

```java
package com.xk._02Algorithmic._01sort.sort.cmp;

import com.xk._02Algorithmic._01sort.sort.Sort;

import java.util.ArrayList;
import java.util.List;

/**
 * @description: å¸Œå°”æ’åº
 * @author: xu
 * @date: 2022/10/2 10:43
 */
public class ShellSort1<E extends Comparable<E>> extends Sort<E> {
    /**
     * å¸Œå°”æ’åº
     */
    private void shellSort(){
        List<Integer> stepSequence = shellStepSequence();
        for (Integer step : stepSequence) {
            shellSort(step);
        }
    }

    /**
     * åˆ†æˆstepåˆ—è¿›è¡Œæ’åº
     * @param step
     */
    private void shellSort(int step) {
        // col: ç¬¬å‡ åˆ—
        for (int col = 0; col < step; col++) { // å¯¹ç¬¬colåˆ—è¿›è¡Œæ’åº
            // å¯¹ [0, array.length) èŒƒå›´çš„å…ƒç´ è¿›è¡Œæ’å…¥å…ƒç´ 
            // colã€col+stepã€col+2*stepã€col+3*step......
            for (int row = col + step; row < array.length; row += step) {
                int curIndex = row;
                while (curIndex > col && cmp(curIndex - step, curIndex) > 0) {
                    swap(curIndex, curIndex - step);
                    curIndex -= step;
                }
            }
        }
    }

    private List<Integer> shellStepSequence() {
        List<Integer> stepSequence = new ArrayList<>();
        int step = array.length;
        while ((step >>= 1) > 0) {
            stepSequence.add(step);
        }
        return stepSequence;
    }

    @Override
    protected void sort() {
        shellSort();
    }
}
```



##### 2.7.5 å¸Œå°”æ’åºä¼˜åŒ–

ç›®å‰**å·²çŸ¥çš„æœ€å¥½çš„æ­¥é•¿åºåˆ—**ï¼Œ**æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦**æ˜¯O(n<sup>4/3</sup>) ï¼Œ1986å¹´ç”±Robert Sedgewickæå‡º

![image-20221004141313150](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004141313150.png)

```java
private List<Integer> shellStepSequence() {
    List<Integer> stepSequence = new LinkedList<>();
    int k = 0, step = 0;
    while (true) {
        if (k % 2 == 0) { // even
            int pow = (int) Math.pow(2, k >> 1);
            step = 1 + 9 * (pow * pow - pow);
        } else { // odd
            int pow1 = (int) Math.pow(2, (k - 1) >> 1);
            int pow2 = (int) Math.pow(2, (k + 1) >> 1);
            step = 1 + 8 * pow1 * pow2 - 6 * pow2;
        }
        if (step >= array.length) break;
        stepSequence.add(0, step);
        k++;
    }
    return stepSequence;
}
```



##### 2.7.6 å¤æ‚åº¦ä¸ç¨³å®šæ€§

- æœ€å¥½æƒ…å†µæ˜¯**æ­¥é•¿åºåˆ—åªæœ‰1ï¼Œä¸”åºåˆ—å‡ ä¹æœ‰åº**ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)
- **æœ€åå’Œå¹³å‡**æ—¶é—´å¤æ‚åº¦å–å†³**æ­¥é•¿åºåˆ—**, èŒƒå›´åœ¨ O(n<sup>3/4</sup>) ~ O(n<sup>2</sup>)
- ç©ºé—´å¤æ‚åº¦ä¸ºO(1)
- å¸Œå°”æ’åºå±äº**ä¸ç¨³å®šæ’åº**



#### 2.8 è®¡æ•°æ’åº

ä¹‹å‰å­¦ä¹ çš„*å†’æ³¡*ã€*é€‰æ‹©*ã€*å †*ã€*æ’å…¥*ã€*å½’å¹¶*ã€*å¿«é€Ÿ*ã€*å¸Œå°”*æ’åºéƒ½æ˜¯**åŸºäºæ¯”è¾ƒ**çš„æ’åºã€‚

*è®¡æ•°*æ’åºã€*æ¡¶*æ’åºã€*åŸºæ•°*æ’åºï¼Œéƒ½**ä¸æ˜¯åŸºäºæ¯”è¾ƒ**çš„æ’åºã€‚

- å®ƒä»¬æ˜¯å…¸å‹çš„**ç”¨ç©ºé—´æ¢æ—¶é—´**ï¼Œåœ¨æŸäº›æ—¶å€™ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦å¯ä»¥æ¯” O(nlogn) æ›´ä½

è®¡æ•°æ’åºäº1954å¹´ç”±Harold H.Sewardæå‡ºï¼Œé€‚åˆ**å¯¹ä¸€å®šèŒƒå›´å†…çš„æ•´æ•°**è¿›è¡Œæ’åºã€‚

è®¡æ•°æ’åºçš„æ ¸å¿ƒæ€æƒ³ï¼š

- ç»Ÿè®¡æ¯ä¸ªæ•´æ•°åœ¨åºåˆ—ä¸­å‡ºç°çš„æ¬¡æ•°ï¼Œè¿›è€Œæ¨å¯¼å‡ºæ¯ä¸ªæ•´æ•°åœ¨æœ‰åºåºåˆ—ä¸­çš„ç´¢å¼•



##### 2.8.1 ç®€å•å®ç°--å®ç°æ­¥éª¤

æ€è·¯ï¼š

- é¦–å…ˆæ‰¾å‡ºè¦æ’åºæ•°ç»„çš„ä¸­çš„æœ€å¤§å€¼ maxï¼›
- æ ¹æ®æœ€å¤§å€¼ max å¼€è¾Ÿ max + 1 ç©ºé—´çš„æ•°ç»„ countsï¼›
- counts æ•°ç»„ç»Ÿè®¡æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°ï¼›
- æ ¹æ®æ•´æ•°å‡ºç°çš„æ¬¡æ•°ï¼Œå¯¹æ•´æ•°è¿›è¡Œæ’åºï¼š
  - éå† counts æ•°ç»„ï¼Œ**ç´¢å¼•indexå³ä¸ºå…ƒç´ å€¼**ï¼Œ**counts[index]** ä¸ºå…ƒç´ çš„å‡ºç°æ¬¡æ•°
  - å°† counts[index] ä¸ª index ä¾æ¬¡æ”¾å…¥æ•°ç»„ï¼Œå³ä¸ºæ’åºè¿‡çš„åºåˆ—



ä¾‹å¦‚å¯¹ { 7, 3, 5, 8, 6, 7, 4, 5 } è¿›è¡Œè®¡æ•°æ’åºï¼šmax = 8

- counts æ•°ç»„ä¸º [0, 0, 0, 1, 1, 2, 1, 2, 1]

- å¯¹ index = 3, counts[index] = 1ï¼Œå³**å¾€æ–°æ•°ç»„ä¸­æ”¾å…¥ 1 ä¸ª 3**ï¼›

  æ­¤æ—¶æ–°æ•°ç»„ä¸º [3]

- å¯¹ index = 4, counts[index] = 1ï¼Œå³**å¾€æ–°æ•°ç»„ä¸­æ”¾å…¥ 1 ä¸ª 4**ï¼›

  æ­¤æ—¶æ–°æ•°ç»„ä¸º [3, 4]

- å¯¹ index = 5, counts[index] = 2ï¼Œå³**å¾€æ–°æ•°ç»„ä¸­æ”¾å…¥ 2 ä¸ª 5**ï¼›

  æ­¤æ—¶æ–°æ•°ç»„ä¸º [3, 4, 5, 5]

- å¯¹ index = 6, counts[index] = 1ï¼Œå³**å¾€æ–°æ•°ç»„ä¸­æ”¾å…¥ 1 ä¸ª 6**ï¼›

  æ­¤æ—¶æ–°æ•°ç»„ä¸º [3, 4, 5, 5, 6]

- å¯¹ index = 7, counts[index] = 2ï¼Œå³**å¾€æ–°æ•°ç»„ä¸­æ”¾å…¥ 2 ä¸ª 7**ï¼›

  æ­¤æ—¶æ–°æ•°ç»„ä¸º [3, 4, 5, 5, 6, 7, 7]

- å¯¹ index = 8, counts[index] = 1ï¼Œå³**å¾€æ–°æ•°ç»„ä¸­æ”¾å…¥ 1 ä¸ª 8**ï¼›

  æ­¤æ—¶æ–°æ•°ç»„ä¸º [3, 4, 5, 5, 6, 7, 7, 8]

![image-20221004173046091](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004173046091.png)



##### 2.8.2 ç®€å•å®ç°--ä»£ç å®ç°

```java
package com.xk._02Algorithmic._01sort.sort;

import com.xk._02Algorithmic._01sort.tools.Integers;

/**
 * @description: è®¡æ•°æ’åº
 * @author: xu
 * @date: 2022/10/2 10:43
 */
public class CountingSort1 extends Sort<Integer> {
    /**
     * è®¡æ•°æ’åº
     */
    private void countingSort(){
        // æ‰¾å‡ºæœ€å¤§å€¼
        int max = array[0];
        for (int i = 1; i < array.length; i++) {
            if (array[i] > max) max = array[i];
        }
        //å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå­˜å‚¨æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°
        int[] counts = new int[max + 1];
        // ç»Ÿè®¡æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°
        for (int i = 0; i < array.length; i++) {
            counts[array[i]]++;
        }
        // æ ¹æ®æ•´æ•°çš„å‡ºç°æ¬¡æ•°ï¼Œå¯¹æ•´æ•°è¿›è¡Œæ’åº
        int index = 0;
        for (int i = 0; i < counts.length; i++) {
            while (counts[i]-- > 0){
                array[index++] = i;
            }
        }
    }

    @Override
    protected void sort() {
        countingSort();
    }
}
```

è¿™ä¸ªç‰ˆæœ¬çš„å®ç°å­˜åœ¨ä»¥ä¸‹é—®é¢˜

- æ— æ³•å¯¹**è´Ÿæ•´æ•°**è¿›è¡Œæ’åº
- æå…¶æµªè´¹å†…å­˜ç©ºé—´
- æ˜¯ä¸ª**ä¸ç¨³å®š**çš„æ’åº



##### 2.8.3 æ”¹è¿›--æ€è·¯

æ”¹è¿›æ€è·¯æ˜¯**æ±‚å‡ºæœ€å°å€¼**ã€‚

![image-20221004173722236](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004173722236.png)



##### 2.8.4 æ”¹è¿›--å›¾è§£

æ¯ä¸ªå…ƒç´ ç´¯åŠ ä¸Šå…¶å‰é¢çš„æ‰€æœ‰å…ƒç´ å¾—åˆ°çš„å°±æ˜¯å…ƒç´ åœ¨æœ‰åºåºåˆ—ä¸­çš„ä½ç½®ä¿¡æ¯ã€‚

ä¾‹å¦‚å¯¹ { 7, 3, 5, 8, 6, 7, 4, 5 } è¿›è¡Œæ”¹è¿›è¿‡çš„è®¡æ•°æ’åºï¼šmin = 3ï¼Œmax = 8

newArray ä¸º**æ–°å¼€è¾Ÿçš„æ•°ç»„**ï¼ŒnewArray = [0, 0, 0, 0, 0, 0, 0, 0]ï¼Œç”¨æ¥**å­˜æ”¾æ’åºç»“æœ**ã€‚

- counts = [1, 2, 4, 5, 7, 8]ï¼›

  å…ƒç´  5 åœ¨æœ‰åºåºåˆ—ä¸­çš„çš„ç´¢å¼•ï¼š`counts[5-3] - 1 = counts[2] - 1 = 3`

  newArray[3] = 5; æ­¤æ—¶ newArray = [0, 0, 0, 5, 0, 0, 0, 0]

  counts[2]--;

  ![image-20221004174215023](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004174215023.png)

- counts = [1, 2, 3, 5, 7, 8]ï¼›

  å…ƒç´  4 åœ¨æœ‰åºåºåˆ—ä¸­çš„çš„ç´¢å¼•ï¼š`counts[4-3] - 1 = counts[1] - 1 = 1`

  newArray[1] = 4; æ­¤æ—¶ newArray = [0, 4, 0, 5, 0, 0, 0, 0]

  counts[1]--;

- counts = [1, 1, 3, 5, 7, 8]ï¼›

  å…ƒç´  7 åœ¨æœ‰åºåºåˆ—ä¸­çš„çš„ç´¢å¼•ï¼š`counts[7-3] - 1 = counts[4] - 1 = 6`

  newArray[6] = 7; æ­¤æ—¶ newArray = [0, 4, 0, 5, 0, 0, 7, 0]

  counts[4]--;

  ![image-20221004174637250](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004174637250.png)

- counts = [1, 1, 3, 5, 6, 8]ï¼›

  å…ƒç´  6 åœ¨æœ‰åºåºåˆ—ä¸­çš„çš„ç´¢å¼•ï¼š`counts[6-3] - 1 = counts[3] - 1 = 4`

  newArray[4] = 6; æ­¤æ—¶ newArray = [0, 4, 0, 5, 6, 0, 7, 0]

  counts[3]--;

- counts = [1, 1, 3, 4, 6, 8]ï¼›

  å…ƒç´  8 åœ¨æœ‰åºåºåˆ—ä¸­çš„çš„ç´¢å¼•ï¼š`counts[8-3] - 1 = counts[5] - 1 = 7`

  newArray[7] = 8; æ­¤æ—¶ newArray = [0, 4, 0, 5, 6, 0, 7, 8]

  counts[5]--;

  ![image-20221004175011488](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004175011488.png)

- counts = [1, 1, 3, 4, 6, 7]ï¼›

  å…ƒç´  5 åœ¨æœ‰åºåºåˆ—ä¸­çš„çš„ç´¢å¼•ï¼š`counts[5-3] - 1 = counts[2] - 1 = 2`

  newArray[2] = 5; æ­¤æ—¶ newArray = [0, 4, 5, 5, 6, 0, 7, 8]

  counts[2]--;

- counts = [1, 1, 2, 4, 6, 7]ï¼›

  å…ƒç´  3 åœ¨æœ‰åºåºåˆ—ä¸­çš„çš„ç´¢å¼•ï¼š`counts[3-3] - 1 = counts[0] - 1 = 0`

  newArray[0] = 3; æ­¤æ—¶ newArray = [3, 4, 5, 5, 6, 0, 7, 8]

  counts[0]--;

  ![image-20221004175304523](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004175304523.png)

- counts = [0, 1, 2, 4 ,6, 7]ï¼›

  å…ƒç´  7 åœ¨æœ‰åºåºåˆ—ä¸­çš„çš„ç´¢å¼•ï¼š`counts[7-3] - 1 = counts[4] - 1 = 5`

  newArray[5] = 8; æ­¤æ—¶ newArray = [3, 4, 5, 5, 6, 7, 7, 8]

  counts[5]--;

  ![image-20221004175447623](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004175447623.png)



##### 2.8.5 æ”¹è¿›--ä»£ç å®ç°

```java
package com.xk._02Algorithmic._01sort.sort;

/**
 * @description: è®¡æ•°æ’åº
 * @author: xu
 * @date: 2022/10/2 10:43
 */
public class CountingSort2 extends Sort<Integer> {

    /**
     * è®¡æ•°æ’åº
     */
    private void countingSort(){
        // æ‰¾å‡ºæœ€å¤§å€¼ã€æœ€å°å€¼
        int max = array[0];
        int min = array[0];
        for (int i = 1; i < array.length; i++) {
            if (array[i] > max) max = array[i];
            if (array[i] < min) min = array[i];
        }
        //å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå­˜å‚¨æ¬¡æ•°
        int[] counts = new int[max - min + 1];
        // ç»Ÿè®¡æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°
        for (int i = 0; i < array.length; i++) {
            counts[array[i] - min]++;
        }
        // ç´¯åŠ æ¬¡æ•°
        for (int i = 1; i < counts.length; i++) {
            counts[i] += counts[i - 1];
        }
        // ä»åå¾€å‰éå†å…ƒç´ ï¼Œå°†å®ƒæ”¾åˆ°æœ‰åºæ•°ç»„ä¸­çš„åˆé€‚ä½ç½®
        Integer[] newArray = new Integer[array.length];
        for (int i = array.length - 1; i >= 0; i--) {
            int index = --counts[array[i] - min];
            newArray[index] = array[i];
        }
        // å°†æœ‰åºæ•°ç»„èµ‹å€¼åˆ°array
        for (int i = 0; i < newArray.length; i++) {
            array[i] = newArray[i];
        }
    }

    @Override
    protected void sort() {
        countingSort();
    }
}
```



##### 2.8.6 å¤æ‚åº¦ä¸ç¨³å®šæ€§

- **æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´**å¤æ‚åº¦ï¼šO(n + k)
- ç©ºé—´å¤æ‚åº¦ï¼šO(n + k)
- k æ˜¯æ•´æ•°çš„å–å€¼èŒƒå›´
- è®¡æ•°æ’åºå±äº**ç¨³å®šæ’åº**



##### 2.8.7 å¯¹è‡ªå®šä¹‰å¯¹è±¡è¿›è¡Œè®¡æ•°æ’åº

å¦‚æœè‡ªå®šä¹‰å¯¹è±¡å¯ä»¥æä¾›ç”¨ä»¥æ’åºçš„æ•´æ•°ç±»å‹ï¼Œä¾ç„¶å¯ä»¥ä½¿ç”¨è®¡æ•°æ’åº

```java
private static class Person {
	int age;
	String name;
	Person(int age, String name) {
		this.age = age;
		this.name = name;
	}
	@Override
	public String toString() {
		return "Person [age=" + age 
				+ ", name=" + name + "]";
	}
}
```

```java
public static void main(String[] args) {
    Person[] persons = new Person[] {
            new Person(20, "A"),
            new Person(-13, "B"),
            new Person(17, "C"),
            new Person(12, "D"),
            new Person(-13, "E"),
            new Person(20, "F")
    };

    // æ‰¾å‡ºæœ€å€¼
    int max = persons[0].age;
    int min = persons[0].age;
    for (int i = 1; i < persons.length; i++) {
        if (persons[i].age > max) {
            max = persons[i].age;
        }
        if (persons[i].age < min) {
            min = persons[i].age;
        }
    }

    // å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå­˜å‚¨æ¬¡æ•°
    int[] counts = new int[max - min + 1];
    // ç»Ÿè®¡æ¯ä¸ªæ•´æ•°å‡ºç°çš„æ¬¡æ•°
    for (int i = 0; i < persons.length; i++) {
        counts[persons[i].age - min]++;
    }
    // ç´¯åŠ æ¬¡æ•°
    for (int i = 1; i < counts.length; i++) {
        counts[i] += counts[i - 1];
    }

    // ä»åå¾€å‰éå†å…ƒç´ ï¼Œå°†å®ƒæ”¾åˆ°æœ‰åºæ•°ç»„ä¸­çš„åˆé€‚ä½ç½®
    Person[] newArray = new Person[persons.length];
    for (int i = persons.length - 1; i >= 0; i--) {
        newArray[--counts[persons[i].age - min]] = persons[i];
    }

    // å°†æœ‰åºæ•°ç»„èµ‹å€¼åˆ°array
    for (int i = 0; i < newArray.length; i++) {
        persons[i] = newArray[i];
    }

    for (int i = 0; i < persons.length; i++) {
        System.out.println(persons[i]);
    }
}
/*
è¾“å‡ºï¼š
Person [age=-13, name=B]
Person [age=-13, name=E]
Person [age=12, name=D]
Person [age=17, name=C]
Person [age=20, name=A]
Person [age=20, name=F]
*/
```



#### 2.9 åŸºæ•°æ’åº

åŸºæ•°æ’åºéå¸¸é€‚åˆç”¨äºæ•´æ•°æ’åºï¼ˆå°¤å…¶æ˜¯**éè´Ÿæ•´æ•°**ï¼‰ï¼Œè¿™é‡Œåªä»‹ç»å¯¹éè´Ÿæ•´æ•°è¿›è¡ŒåŸºæ•°æ’åºã€‚

æ‰§è¡Œæµç¨‹ï¼šä¾æ¬¡å¯¹**ä¸ªä½æ•°ã€åä½æ•°ã€ç™¾ä½æ•°ã€åƒä½æ•°ã€ä¸‡ä½æ•°**â€¦è¿›è¡Œæ’åºï¼ˆä»ä½ä½åˆ°é«˜ä½ï¼‰

![image-20221004181021976](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004181021976.png)



##### 2.9.1 ä»£ç å®ç°

ä¸ªä½æ•°ã€åä½æ•°ã€ç™¾ä½æ•°çš„å–å€¼èŒƒå›´éƒ½æ˜¯å›ºå®šçš„0~9ï¼Œå¯ä»¥ä½¿ç”¨`è®¡æ•°æ’åº`å¯¹å®ƒä»¬è¿›è¡Œæ’åºã€‚

```java
package com.xk._02Algorithmic._01sort.sort;

import com.xk._02Algorithmic._01sort.tools.Integers;

/**
 * @description: åŸºæ•°æ’åº
 * @author: xu
 * @date: 2022/10/2 10:43
 */
public class RadixSort extends Sort<Integer> {
    /**
     * åŸºæ•°æ’åº
     */
    private void radixSort(){
        // æ‰¾å‡ºæœ€å¤§å€¼
        int max = array[0];
        for (int i = 1; i < array.length; i++) {
            if (array[i] > max) max = array[i];
        }
        for (int divider = 1; divider <= max; divider *= 10){
            countingSort(divider);
        }
    }

    /**
     * è®¡æ•°æ’åº
     */
    private void countingSort(int divider){
        //å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå­˜å‚¨æ¬¡æ•°
        int[] counts = new int[10];
        // ç»Ÿè®¡æ¯ä¸ªä½æ•°å‡ºç°çš„æ¬¡æ•°
        for (int i = 0; i < array.length; i++) {
            counts[array[i] / divider % 10]++;
        }
        // ç´¯åŠ æ¬¡æ•°
        for (int i = 1; i < counts.length; i++) {
            counts[i] += counts[i - 1];
        }
        // ä»åå¾€å‰éå†å…ƒç´ ï¼Œå°†å®ƒæ”¾åˆ°æœ‰åºæ•°ç»„ä¸­çš„åˆé€‚ä½ç½®
        Integer[] newArray = new Integer[array.length];
        for (int i = array.length - 1; i >= 0; i--) {
            int index = --counts[array[i] / divider % 10];
            newArray[index] = array[i];
        }
        // å°†æœ‰åºæ•°ç»„èµ‹å€¼åˆ°array
        for (int i = 0; i < newArray.length; i++) {
            array[i] = newArray[i];
        }
    }

    @Override
    protected void sort() {
        radixSort();
    }
}
```



##### 2.9.2 å¤æ‚åº¦ä¸ç¨³å®šæ€§

- æœ€å¥½ã€æœ€åã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(d âˆ— (n + k)) ï¼Œd æ˜¯æœ€å¤§å€¼çš„ä½æ•°ï¼Œk æ˜¯è¿›åˆ¶
- ç©ºé—´å¤æ‚åº¦ï¼šO(n + k)ï¼Œk æ˜¯è¿›åˆ¶
- åŸºæ•°æ’åºå±äº**ç¨³å®šæ’åº**



##### 2.9.3 åŸºæ•°æ’åº--å¦ä¸€ç§æ€è·¯

![image-20221004181841004](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004181841004.png)

*ä»£ç å®ç°*ï¼š

![image-20221004181924474](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004181924474.png)

*å¤æ‚åº¦ä¸ç¨³å®šæ€§*ï¼š

- ç©ºé—´å¤æ‚åº¦æ˜¯ O(kn + k) ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(dn)
- d æ˜¯æœ€å¤§å€¼çš„ä½æ•°ï¼Œk æ˜¯è¿›åˆ¶



#### 2.10 æ¡¶æ’åº

æ‰§è¡Œæµç¨‹ï¼š

1. åˆ›å»ºä¸€å®šæ•°é‡çš„æ¡¶ï¼ˆæ¯”å¦‚ç”¨æ•°ç»„ã€é“¾è¡¨ä½œä¸ºæ¡¶ï¼‰
2. æŒ‰ç…§ä¸€å®šçš„è§„åˆ™ï¼ˆä¸åŒç±»å‹çš„æ•°æ®ï¼Œè§„åˆ™ä¸åŒï¼‰ï¼Œå°†åºåˆ—ä¸­çš„å…ƒç´ å‡åŒ€åˆ†é…åˆ°å¯¹åº”çš„æ¡¶
3. åˆ†åˆ«å¯¹æ¯ä¸ªæ¡¶è¿›è¡Œå•ç‹¬æ’åº
4. å°†æ‰€æœ‰éç©ºæ¡¶çš„å…ƒç´ åˆå¹¶æˆæœ‰åºåºåˆ—

å…ƒç´ åœ¨æ¡¶ä¸­çš„ç´¢å¼•ï¼š*å…ƒç´ å€¼ \* å…ƒç´ æ•°é‡*

![image-20221004184805255](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004184805255.png)

##### 2.10.1 ä»£ç å®ç°

![image-20221004185045820](02-æ‹ä¸Šæ•°æ®ç»“æ„-ç®—æ³•ç¯‡.assets/image-20221004185045820.png)



##### 2.10.2 å¤æ‚åº¦ä¸ç¨³å®šæ€§

- ç©ºé—´å¤æ‚åº¦ï¼šO(n + m)ï¼Œm æ˜¯æ¡¶çš„æ•°é‡

- æ—¶é—´å¤æ‚åº¦ï¼šO(n) + m âˆ— O(n/m âˆ— log(n/m)) = O(n + n âˆ— log(n/m)) = O(n + n âˆ— logn âˆ’ n âˆ— logm)

  å› æ­¤ä¸º O(n + k)ï¼Œk ä¸º n âˆ— logn âˆ’ n âˆ— logm

- æ¡¶æ’åºå±äº**ç¨³å®šæ’åº**



#### 2.11 'æœ€å¼º'æ’åº--ç¡çœ æ’åº

```java
/**
 * ç¡çœ æ’åº
 */
public class SortThread extends Thread{
	public int value;
	public SortThread(int value) {
		this.value = value;
	}
	public void run(){
		try{
			Thread.sleep(value);
			System.out.println(value);
		}catch (InterruptedException e) {
			e.printStackTrace();
		}
	}
	public static void main(String[] args) {
		int [] array = {10, 100, 50, 30, 60, 61, 64, 47,79, 59};
		for (int i = 0; i < array.length; i++) {
			new SortThread(array[i]).start();
		}
		
	}
}
```









































































